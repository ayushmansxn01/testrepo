<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Day 2 | Network Models and HIV/STI with EpiModel | Harvard 2017" />


<title>Tutorial 5: Demography and Attributes</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">NME HSPH</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://epimodel.org/">
    <span class="fa fa-database"></span>
     
    EpiModel
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Tutorial 5: Demography and Attributes</h1>
<h4 class="author"><em>Day 2 | Network Models and HIV/STI with EpiModel | Harvard 2017</em></h4>

</div>


<p>This tutorial demonstrates how to model a Susceptible-Infected (SI) epidemic in an open population. An example of an SI epidemic is HIV, with infected persons never leaving the infected stage before death. Modeling HIV is quite complicated, and this tutorial is not meant to be an HIV model per se: it does not include many components of HIV models, such as disease stage, drug therapy, and so on. This only represents SI dynamics generally with the possibility of vital dynamics.</p>
<p>The population is open as we are now including births and deaths in the epidemic process. Simulating an epidemic in an open population requires adjustments that accommodate changes to the network structure over time. For the sake of simplicity, the death processes will not depend on disease status, which will keep the population size stable over time.</p>
<p>This tutorial will include two counterfactal network models that will allow behavior (mean degree and mixing) to vary across two hypothetical races. These behavioral differences are not meant to represent empirical data; they are just an extreme illustration of the impact of partnership structure on epidemic outcomes.</p>
<div id="network-model" class="section level1">
<h1>Network Model</h1>
<p>The network is initialized as before, but now we set a vertex attribute of race onto the network. Race will be a binary variable, with the races evenly sized in the population.</p>
<pre class="r"><code>nw &lt;- network.initialize(n = 500, directed = FALSE)  
nw &lt;- set.vertex.attribute(nw, attrname = &quot;race&quot;, value = rep(0:1, each = 250))</code></pre>
<p>We will proceed by fitting two network models: Model 1 will feature a scenario in which the mean degree is the same by both races and there is no race-based homophily; Model 2 will feature a scenario in which Race 1 has a higher mean degree and there is strong racial mixing.</p>
<div id="model-1-random-mixing-degree" class="section level2">
<h2>Model 1: Random Mixing, Degree</h2>
<p>The first model will assume that there is random mixing the population, with no preference for same-race partnerships, and that the two races have the same mean degree. In fact, this means that there is no need to include separate terms for degree and homophily in the network model (it is an edges-only model or Bernoulli random graph), but we include them for the sake of comparison.</p>
<div id="parameterization" class="section level3">
<h3>Parameterization</h3>
<p>The formation formula for this first model will include terms for edges, mean degree by race (nodefactor), and mixing by race (nodematch). We will use the edges to control the overall mean degree in the network, the nodefactor term to allow it to vary by race, and the nodematch to control homophily.</p>
<pre class="r"><code>formation &lt;- ~edges + nodefactor(&quot;race&quot;) + nodematch(&quot;race&quot;)</code></pre>
<p>The target statistics for each of the terms is as follows. Both this model and Model 2 will use the same total mean degree in the population overall: a 0.5 mean degree translates into 125 edges in a population of 500 nodes. The second statistic controls the mean degree of Race 1 nodes (the reference value for Race 0 nodes does not need to be specified). Since the Race 1 group has a population size of 250, the target value of 125 can be translated as a mean degree of 0.5 for this group: that is, no differential mean degree by race. The nodematch statistic represents the number of edges that are between nodes of the same race. Given the equal population sizes, the expected number of same-race edges in a random mixing scenario is equal to 50% of the number of edges, or 62.5.</p>
<pre class="r"><code>target.stats &lt;- c(125, 125, 62.5)</code></pre>
<p>The dissolution model components will be the same for both models. We specify a homogeneous dissolution model with an average partnership duration of 40 weeks. The dissolution coefficients must be adjusted to accommodate the exogenous probability of edge dissolution due to mortality. This adjustment has the impact of increasing the coefficient as seen below.</p>
<pre class="r"><code>coef.diss &lt;- dissolution_coefs(dissolution = ~offset(edges), 
                               duration = 40, d.rate = 0.01)
coef.diss</code></pre>
<pre><code>Dissolution Coefficients
=======================
Dissolution Model: ~offset(edges)
Target Statistics: 40
Crude Coefficient: 3.663562
Mortality/Exit Rate: 0.01
Adjusted Coefficient: 5.253197</code></pre>
</div>
<div id="estimation" class="section level3">
<h3>Estimation</h3>
<p>The network model is estimated using the <code>netest</code> function with all the inputs we specified above.</p>
<pre class="r"><code>est1 &lt;- netest(nw, formation, target.stats, coef.diss)</code></pre>
<pre><code>Unable to match target stats. Using MCMLE estimation.</code></pre>
<p>One way to see the impact of the target statistics on the network model is to use the <code>summary</code> function on the output object. This shows that the coefficients for the nodefactor and nodematch terms are nearly 0, with p-values of nearly 1, suggesting no statistical evidence for differential mean degree and racial homophily, as expected.</p>
<pre class="r"><code>summary(est1)</code></pre>
<pre><code>
==========================
Summary of model fit
==========================

Formula:   nw ~ edges + nodefactor(&quot;race&quot;) + nodematch(&quot;race&quot;)
&lt;environment: 0x7faf48a27808&gt;

Iterations:  2 out of 20 

Monte Carlo MLE Results:
                   Estimate Std. Error MCMC % p-value    
edges             -6.910194   0.181004      0  &lt;1e-04 ***
nodefactor.race.1  0.004135   0.127486      0   0.974    
nodematch.race     0.003172   0.178571      0   0.986    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Log-likelihood was not estimated for this fit.
To get deviances, AIC, and/or BIC from fit `object$fit` run 
  &gt; object$fit&lt;-logLik(object$fit, add=TRUE)
to add it to the object or rerun this function with eval.loglik=TRUE.

Dissolution Coefficients
=======================
Dissolution Model: ~offset(edges)
Target Statistics: 40
Crude Coefficient: 3.663562
Mortality/Exit Rate: 0.01
Adjusted Coefficient: 5.253197</code></pre>
</div>
<div id="diagnostics" class="section level3">
<h3>Diagnostics</h3>
<p>For the diagnostics for this model, we set the <code>nwstats.formula</code> to expand the formation formula slightly to specify a base value for the nodefactor term. Setting <code>base = 0</code> in this term will output statistics for both races in the model. The <code>netdx</code> function can use multicore processor technology to run diagnostics in parallel. The <code>ncores</code> argument will specify how many of the computer’s cores to use simultaneously for these diagnostics (use <code>parallel::detectCores()</code> to look up the maximum on any computer).</p>
<pre class="r"><code>dx1 &lt;- netdx(est1, nsims = 10, nsteps = 1000, ncores = 4,
             nwstats.formula = ~edges + 
                                nodefactor(&quot;race&quot;, base = 0) + 
                                nodematch(&quot;race&quot;))</code></pre>
<p>Printing the diagnostics shows a good fit between the targets and the simulated outputs. There is no difference between the simulated means for nodefactor statistics for Race 0 compared to Race 1, indicating no differentials in mean degree by race.</p>
<pre class="r"><code>dx1</code></pre>
<pre><code>EpiModel Network Diagnostics
=======================
Diagnostic Method: Dynamic
Simulations: 10
Time Steps per Sim: 1000

Formation Diagnostics
----------------------- 
                  Target Sim Mean Pct Diff Sim SD
edges              125.0  129.998    0.040 11.328
nodefactor.race.0     NA  129.575       NA 13.889
nodefactor.race.1  125.0  130.421    0.043 13.944
nodematch.race      62.5   64.921    0.039  8.151

Dissolution Diagnostics
----------------------- 
               Target Sim Mean Pct Diff Sim SD
Edge Duration  40.000   38.752   -0.031 37.988
Pct Edges Diss  0.025    0.025   -0.010  0.014</code></pre>
<p>Plotting the diagnostics shows that the simulations are right on target for all three modeled terms in the formation model. We will skip plotting the dissolution model diagnostics for this example.</p>
<pre class="r"><code>plot(dx1)</code></pre>
<p><img src="d2-tut5_files/figure-html/plotDx1-1.png" width="672" /></p>
</div>
</div>
<div id="model-2-assortative-mixing-and-differential-degree" class="section level2">
<h2>Model 2: Assortative Mixing and Differential Degree</h2>
<p>The counterfactual in Model 2 will alter the nodefactor and nodematch target statistics to allow for differentials in mean degree by race and for homophily in race mixing.</p>
<div id="parameterization-1" class="section level3">
<h3>Parameterization</h3>
<p>The formula for the formation component of the model will be recycled from Model 1. Therefore, it is only necessary to specify the target statistics for the model.</p>
<p>As noted, the overall mean degree will remain the same at 0.5 across the two models, but the mean degree by race will differ. We will specify that the mean degree for Race 1 is 0.75; given the overall mean degree is 0.5 and the proportional distribution of races is equal, that implies that the mean degree for Race 0 will be 0.25. The target statistic for the nodefactor term is the product of the mean degree of Race 1 and the size of Race 1: <code>0.75 * 250 = 175</code>. Finally, we will specify that 90% of the partnerships occur between persons of the same race, or 112.5 partnerships.</p>
<pre class="r"><code>target.stats &lt;- c(125, 187.5, 112.5)</code></pre>
<p>The other components of the model, including the network object and dissolution model components, are recycled from Model 1.</p>
</div>
<div id="estimation-1" class="section level3">
<h3>Estimation</h3>
<p>The new target statistics are entered in this new model with the remaining components from Model 1.</p>
<pre class="r"><code>est2 &lt;- netest(nw, formation, target.stats, coef.diss)</code></pre>
<pre><code>Unable to match target stats. Using MCMLE estimation.</code></pre>
<p>To compare coefficients with Model 1, the estimates for the nodefactor and nodematch terms are now highly significant. The positive sign of both term shows these are greater than expected than under the null model, precisely as we have parameterized them.</p>
<pre class="r"><code>summary(est2)</code></pre>
<pre><code>
==========================
Summary of model fit
==========================

Formula:   nw ~ edges + nodefactor(&quot;race&quot;) + nodematch(&quot;race&quot;)
&lt;environment: 0x7faf47a3ec40&gt;

Iterations:  2 out of 20 

Monte Carlo MLE Results:
                  Estimate Std. Error MCMC % p-value    
edges              -9.1362     0.3125      0  &lt;1e-04 ***
nodefactor.race.1   0.6261     0.1131      0  &lt;1e-04 ***
nodematch.race      2.0127     0.3104      0  &lt;1e-04 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Log-likelihood was not estimated for this fit.
To get deviances, AIC, and/or BIC from fit `object$fit` run 
  &gt; object$fit&lt;-logLik(object$fit, add=TRUE)
to add it to the object or rerun this function with eval.loglik=TRUE.

Dissolution Coefficients
=======================
Dissolution Model: ~offset(edges)
Target Statistics: 40
Crude Coefficient: 3.663562
Mortality/Exit Rate: 0.01
Adjusted Coefficient: 5.253197</code></pre>
</div>
<div id="diagnostics-1" class="section level3">
<h3>Diagnostics</h3>
<p>The diagnostics on this second model are run using the same approach as Model 1, but we pass in the fitted model object for Model 2.</p>
<pre class="r"><code>dx2 &lt;- netdx(est2, nsims = 10, nsteps = 1000, ncores = 4,
            nwstats.formula = ~edges +
                               nodefactor(&quot;race&quot;, base = 0) +
                               nodematch(&quot;race&quot;))</code></pre>
<p>Printing the model shows that the simulated network statistics are consistent with the target statistics in the formation and dissolution model. The simulated mean for the nodefactor target statistic for Race 0 correspond to a mean degree of 0.25 in that group, as expected.</p>
<pre class="r"><code>dx2</code></pre>
<pre><code>EpiModel Network Diagnostics
=======================
Diagnostic Method: Dynamic
Simulations: 10
Time Steps per Sim: 1000

Formation Diagnostics
----------------------- 
                  Target Sim Mean Pct Diff Sim SD
edges              125.0  128.002    0.024 11.585
nodefactor.race.0     NA   62.916       NA 10.117
nodefactor.race.1  187.5  193.088    0.030 19.841
nodematch.race     112.5  115.253    0.024 10.918

Dissolution Diagnostics
----------------------- 
               Target Sim Mean Pct Diff Sim SD
Edge Duration  40.000   38.477   -0.038 37.936
Pct Edges Diss  0.025    0.025   -0.003  0.014</code></pre>
<p>The plots look fine here, so we move onto the epidemic simulation.</p>
<pre class="r"><code>plot(dx2)</code></pre>
<p><img src="d2-tut5_files/figure-html/plotDx2-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="epidemic-simulation" class="section level1">
<h1>Epidemic Simulation</h1>
<p>This epidemic simulation will investigate how variation in mean degree by race and highly assortative race mixing jointly impact epidemic prevalence overall and by race. We will use one set of epidemic parameters, initial conditions, and control settings shared across the two counterfactual models.</p>
<div id="parameterization-2" class="section level2">
<h2>Parameterization</h2>
<p>The parameters are entered into the <code>param.net</code> function as in previous tutorial. Since this is be an SI epidemic, there will be no recovery rate parameter. The three new parameters will control the birth rate, death rate among the susceptibles, and death rate in the infected group. For this tutorial, we will assume that all three rates are equal, which implies that there is no disease-induced mortality and that there will be a stable population size.</p>
<pre class="r"><code>param &lt;- param.net(inf.prob = 0.1, act.rate = 5,
                   b.rate = 0.01, ds.rate = 0.01, di.rate = 0.01)</code></pre>
<p>Similar to the previous tutorial, we only need to specify the number infected at the outset. To generate stable epidemic conditions quickly, we will set that the prevalence is 10%, distributed randomly among the population.</p>
<pre class="r"><code>init &lt;- init.net(i.num = 50)</code></pre>
<p>The inputs for the control settings will look similar to the previous tutorial. As we have discussed, the resimulation of networks at each time step is more computationally intensive than simulating the dynamic network structure in advance. Therefore, when running this simulation during the workshop, it is suggested that you only run one simulation (each counterfactual will take a couple of minutes). We have run 10 simulations to prepare this tutorial to show the stochastic variation. There are methods to running these simulations in parallel on multicore computing platforms.</p>
<p>A new argument for the control settings to discuss is <code>epi.by</code>, which provides stratified prevalence estimates by a categorical attribute in the network. Here we specify that as <code>&quot;race&quot;</code>, since that is the name our vertex attribute in the network models.</p>
<pre class="r"><code>control &lt;- control.net(type = &quot;SI&quot;, nsteps = 500, nsims = 10, epi.by = &quot;race&quot;)</code></pre>
</div>
<div id="simulation" class="section level2">
<h2>Simulation</h2>
<p>To simulate the two network models, we use two calls to the <code>netsim</code> function, one with the fitted estimation object from Model 1 and the other from Model 2. When run in interactive mode, basic output from the model progress will be printed to the console, with information on current prevalence, population size, and flows.</p>
<pre class="r"><code>sim1 &lt;- netsim(est1, param, init, control)
sim2 &lt;- netsim(est2, param, init, control)</code></pre>
<p>Print the <code>netsim</code> output object shows its contents. The output compartments now include both the overall susceptible and infected numbers but also the numbers stratified by values of the race variable.</p>
<pre class="r"><code>sim1</code></pre>
<pre><code>EpiModel Simulation
=======================
Model class: netsim

Simulation Summary
-----------------------
Model type: SI
No. simulations: 10
No. time steps: 500
No. NW modes: 1

Model Parameters
-----------------------
inf.prob = 0.1
act.rate = 5
b.rate = 0.01
ds.rate = 0.01
di.rate = 0.01

Model Output
-----------------------
Variables: s.num s.num.race0 s.num.race1 i.num i.num.race0 
i.num.race1 num num.race0 num.race1 ds.flow di.flow b.flow 
si.flow
Networks: sim1 ... sim10
Transmissions: sim1 ... sim10</code></pre>
</div>
<div id="model-analysis" class="section level2">
<h2>Model Analysis</h2>
<p>Our model analysis will consist of model diagnostics, and then the examination of the epidemiological outcomes overall and by race.</p>
<div id="post-simulation-diagnostics" class="section level3">
<h3>Post-Simulation Diagnostics</h3>
<p>It is important to first examine the network model diagnostics after the epidemic simulation, since the vital dynamics within these simulations may have changed the fundamental structure of the network model in unexpected ways. Here we show how to plot model diagnostics recorded within the epidemic simulation. Although we have saved all the network statistics in the formation formula, here we plot the number of edges over time. Since the simulations are stochastically varying around the targets, we will proceed with analysis of the epidemiological data.</p>
<pre class="r"><code>par(mfrow = c(1, 2))
plot(sim1, type = &quot;formation&quot;, stats = &quot;edges&quot;)
plot(sim2, type = &quot;formation&quot;, stats = &quot;edges&quot;)</code></pre>
<p><img src="d2-tut5_files/figure-html/plotForm-1.png" width="672" /></p>
</div>
<div id="epidemiologic-outcomes" class="section level3">
<h3>Epidemiologic Outcomes</h3>
<p>This example shows how to plot outputs of two separate simulation objects onto one plot window using the <code>add</code> argument. Note that this does require a manual construction of a plot legend as shown below. The substantive result is that the total prevalence in the population is equal given the overlapping bounds of the simulations.</p>
<pre class="r"><code>plot(sim1, y = &quot;i.num&quot;, qnts = 1, mean.col = &quot;steelblue&quot;,
     qnts.col = &quot;steelblue&quot;, main = &quot;Total Prevalence&quot;)
plot(sim2, y = &quot;i.num&quot;, qnts = 1, mean.col = &quot;firebrick&quot;, 
     qnts.col = &quot;firebrick&quot;, add = TRUE)
legend(&quot;topleft&quot;, c(&quot;Model 1&quot;, &quot;Model 2&quot;), lwd = 3, 
       col = c(&quot;steelblue&quot;, &quot;firebrick&quot;), bty = &quot;n&quot;)</code></pre>
<p><img src="d2-tut5_files/figure-html/plotSim1-1.png" width="672" /></p>
<p>The next plot shows the prevalence by race in Model 1 compared to Model 2. Setting the <code>ylim</code> manually is necessary to ensure that the axes on both plots match. The substantive result is that Model 1 shows no differences in prevalence by race (as expected) and Model 2 shows large differences.</p>
<pre class="r"><code>par(mfrow = c(1, 2))
plot(sim1, y = c(&quot;i.num.race0&quot;, &quot;i.num.race1&quot;),  legend = TRUE, qnts = 1,
     ylim = c(0, 200), main = &quot;M1: Disease Prevalence by Race&quot;)
plot(sim2, y = c(&quot;i.num.race0&quot;, &quot;i.num.race1&quot;), legend = TRUE,  qnts = 1, 
     ylim = c(0, 200), main = &quot;M2: Disease Prevalence by Race&quot;)</code></pre>
<p><img src="d2-tut5_files/figure-html/plotSim2-1.png" width="672" /></p>
<br>
<hr style="background-color:#909090;height:1px;width:100%">
<p><small> <em>Last updated:</em> 2017-06-24 with EpiModel v1.5.0 </small></p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
